---
// BaseLayout.astro - Shared layout for BuWa TV pages
// Provides common head elements, footer, and slots for page content

import SpeedInsights from '@vercel/speed-insights/astro';

interface Props {
  title: string;
  description: string;
  canonical?: string;
  image?: string;
  imageAlt?: string;
  noindex?: boolean;
  ogType?: string;
}

const { title, description, canonical, image, imageAlt, noindex, ogType } = Astro.props;
const baseUrl = Astro.site ?? Astro.url;
const buwaTvUrl = new URL('/buwatv/', baseUrl).toString();
const canonicalUrl = canonical ?? new URL(Astro.url.pathname, baseUrl).toString();
const defaultImage = '/uploads/logos/buwa-tv-dark.png';
const imageUrl = new URL(image ?? defaultImage, baseUrl).toString();
const imageAltText = imageAlt ?? 'BuWa TV indoor digital billboards';
const globalNoindex = import.meta.env.PUBLIC_BUWATV_NOINDEX === 'true';
const shouldNoindex = noindex || globalNoindex;
const robotsContent = shouldNoindex ? 'noindex, nofollow' : 'index, follow';
const ogTypeValue = ogType ?? 'website';
const structuredData = {
  '@context': 'https://schema.org',
  '@graph': [
    {
      '@type': 'Organization',
      name: 'BuWa TV',
      url: buwaTvUrl,
      logo: new URL('/uploads/logos/buwa-tv-dark.png', baseUrl).toString(),
      sameAs: [
        'https://www.youtube.com/@BuWadigital',
        'https://www.facebook.com/BuWaDigital',
        'https://www.instagram.com/buwadigital'
      ]
    },
    {
      '@type': 'WebSite',
      name: 'BuWa TV',
      url: buwaTvUrl
    }
  ]
};
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{title}</title>
  <meta name="description" content={description}>
  <meta name="robots" content={robotsContent}>
  <link rel="canonical" href={canonicalUrl}>
  <link rel="alternate" hreflang="en-US" href={canonicalUrl}>
  <link rel="alternate" hreflang="x-default" href={canonicalUrl}>
  <meta property="og:title" content={title}>
  <meta property="og:description" content={description}>
  <meta property="og:type" content={ogTypeValue}>
  <meta property="og:url" content={canonicalUrl}>
  <meta property="og:image" content={imageUrl}>
  <meta property="og:image:alt" content={imageAltText}>
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:type" content="image/png">
  <meta property="og:site_name" content="BuWa TV">
  <meta property="og:locale" content="en_US">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content={title}>
  <meta name="twitter:description" content={description}>
  <meta name="twitter:image" content={imageUrl}>
  <meta name="twitter:image:alt" content={imageAltText}>
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Montserrat:wght@400;500;600&family=Outfit:wght@600;700&display=swap" rel="stylesheet">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  <!-- Plausible Analytics -->
  <script async src="https://plausible.io/js/pa-G2ckSejgBZ8fG_9U33pzh.js"></script>
  <script>
    window.plausible=window.plausible||function(){(plausible.q=plausible.q||[]).push(arguments)},plausible.init=plausible.init||function(i){plausible.o=i||{}};
    plausible.init()
  </script>

  <!-- Structured data -->
  <script type="application/ld+json">
    {JSON.stringify(structuredData)}
  </script>
  
  <!-- Page-specific head content -->
  <slot name="head" />
</head>

<body>
  <!-- Header slot - pages provide their own header -->
  <slot name="header" />
  
  <!-- Main content -->
  <slot />
  
  <!-- Footer -->
  <footer class="footer section-accent-bar">
    <div class="container">
      <div class="footer-content">
        <div class="footer-brand">
          <img src="/uploads/logos/buwa-tv-dark.png" alt="BuWa TV" class="footer-logo">
          <p class="footer-tagline">✦ Part of the BuWa Digital family ✦</p>
        </div>
        <div class="footer-links">
          <a href="/buwatv/#contact" class="open-contact-popup">Contact Us</a>
          <a href="/buwatv/pricing/">Pricing</a>
          <a href="/buwatv/locations/">Locations</a>
          <a href="/buwatv/faq/">FAQ</a>
          <a href="/buwatv/#host-partner">Host Partner</a>
          <a href="/about-us/">About Us</a>
          <a href="/">BuWa Digital</a>
        </div>
        <div class="footer-social">
          <a href="https://www.youtube.com/@BuWadigital" target="_blank" rel="noopener"><i class="fab fa-youtube"></i></a>
          <a href="https://www.facebook.com/BuWaDigital" target="_blank" rel="noopener"><i class="fab fa-facebook"></i></a>
          <a href="https://www.instagram.com/buwadigital" target="_blank" rel="noopener"><i class="fab fa-instagram"></i></a>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 BuWa&reg; digital. All rights reserved.</p>
        <div class="footer-legal">
          <a href="/buwatv/privacy/">Privacy Policy</a>
          <span class="separator">|</span>
          <a href="/buwatv/terms/">Terms & Conditions</a>
        </div>
      </div>
    </div>
  </footer>
  <SpeedInsights />
</body>
</html>

<style is:global>
  /* Honeypot (fax field) - hidden from users, bots fill it; Tasklet ignores when populated */
  .honeypot {
    position: absolute;
    left: -9999px;
    width: 1px;
    height: 1px;
    overflow: hidden;
  }

  /* Base reset for pages using this layout */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Montserrat', sans-serif;
    line-height: 1.6;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: 'Outfit', 'Inter', sans-serif;
    font-weight: 700;
  }

  a {
    text-decoration: none;
    color: inherit;
  }

  img {
    max-width: 100%;
    height: auto;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 40px;
  }

  /* Red accent bar between white/blue sections */
  .section-accent-bar {
    position: relative;
  }
  .section-accent-bar::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #a01c2b, #b82232);
  }

  /* Footer Styles */
  .footer {
    background: #fff;
    color: #1a1a2e;
    padding: 60px 0 30px;
    position: relative;
    box-shadow: 0 -1px 0 0 rgba(0,0,0,0.04);
  }

  .footer-tagline {
    font-size: 0.9rem;
    letter-spacing: 0.02em;
  }

  .footer-content {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: 40px;
    align-items: center;
    padding-bottom: 40px;
    border-bottom: 1px solid rgba(0,0,0,0.08);
  }

  .footer-logo {
    width: 150px;
  }

  .footer-brand p {
    color: rgba(26,26,46,0.6);
    font-size: 0.9rem;
    margin-top: 10px;
  }

  .footer-links {
    display: flex;
    gap: 30px;
  }

  .footer-links a {
    color: rgba(26,26,46,0.8);
    transition: color 0.2s ease;
  }

  .footer-links a:hover {
    color: #1a1a2e;
  }

  .footer-social {
    display: flex;
    gap: 20px;
    justify-content: flex-end;
  }

  .footer-social a {
    width: 45px;
    height: 45px;
    background: rgba(26,26,46,0.08);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    color: #1a1a2e;
    transition: all 0.2s ease;
  }

  .footer-social a:hover {
    background: #a01c2b;
    color: white;
    transform: translateY(-3px);
  }

  .footer-bottom {
    text-align: center;
    padding-top: 30px;
    color: rgba(26,26,46,0.6);
    font-size: 0.9rem;
  }

  .footer-legal {
    margin-top: 10px;
  }

  .footer-legal a {
    color: rgba(26,26,46,0.6);
    transition: color 0.2s ease;
  }

  .footer-legal a:hover {
    color: #1a1a2e;
  }

  .footer-legal .separator {
    margin: 0 10px;
    color: rgba(26,26,46,0.3);
  }

  /* Footer Responsive */
  @media (max-width: 992px) {
    .footer-content {
      grid-template-columns: 1fr;
      text-align: center;
      gap: 30px;
    }

    .footer-social {
      justify-content: center;
    }

    .footer-links {
      flex-wrap: wrap;
      justify-content: center;
    }
  }

  @media (max-width: 768px) {
    .container {
      padding: 0 20px;
    }

    .footer-links {
      flex-direction: column;
      gap: 15px;
    }
  }
</style>
